version: "3.9"
services:
  crawl4ai:
    image: uncle_code/crawl_for_ai:basic-amd64
    restart: unless-stopped
    environment:
      PORT: 8080
      # если хочешь закрыть API токеном — добавь переменную в Apps и здесь ничего не меняй
   CRAWL_FOR_AI_API_TOKEN: ${CRAWL_FOR_AI_API_TOKEN}
    ports:
      - "8080:8080"
    shm_size: "1g"
    healthcheck:
      test: ["CMD-SHELL", "wget -qO- http://localhost:8080/docs >/dev/null || exit 1"]
      interval: 30s
      timeout: 10s
      retries: 5
